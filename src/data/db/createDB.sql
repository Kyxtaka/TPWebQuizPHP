CREATE TABLE USERS (
  id NUMBER(11) NOT NULL,
  username VARCHAR(255) NOT NULL,
  motDePasse VARCHAR(255) NOT NULL,
  PRIMARY KEY (id)
);

CREATE TABLE TOKENS (
  id NUMBER(11) NOT NULL,
  token VARCHAR(255) NOT NULL,
  userId NUMBER(11) NOT NULL,
  issedAt TIMESTAMP NOT NULL,
  expiresAt TIMESTAMP NOT NULL,
  PRIMARY KEY (id),
  FOREIGN KEY (userId) REFERENCES USERS(id)
);

CREATE TABLE ROLES (
  id NUMBER(11) NOT NULL,
  nomRole VARCHAR(255) NOT NULL,-
  PRIMARY KEY (id)
);

CREATE TABLE USER_ROLES (
  userId NUMBER(11) NOT NULL,   
  roleId NUMBER(11) NOT NULL,
  PRIMARY KEY (userId, roleId),
  FOREIGN KEY (userId) REFERENCES USERS(id),
  FOREIGN KEY (roleId) REFERENCES ROLES(id)
);

CREATE TABLE QCM (
  id NUMBER(11) NOT NULL,
  uuid VARCHAR(255) NOT NULL,
  nomQCM VARCHAR(255) NOT NULL,
  typeQCM VARCHAR(255) NOT NULL,
  number_of_questions NUMBER(11) NULL,
  PRIMARY KEY (id)
);

CREATE TABLE QCMTENTATIVE (
  qcmId NUMBER(11) NOT NULL,
  playerId NUMBER(11) NOT NULL,
  score DECIMAL(4,2) NULL,
  PRIMARY KEY (qcmId, playerId)
);

CREATE TABLE QUESTIONS (
  id VARCHAR(255) NOT NULL,
  qcmId NUMBER(11) NOT NULL,
  question VARCHAR(255) NOT NULL,
  PRIMARY KEY (id),
  FOREIGN KEY (qcmId) REFERENCES QCM(id)
);

CREATE TABLE ANSWERS (
  id NUMBER(11) NOT NULL,
  questionId NUMBER(11) NOT NULL,
  answer VARCHAR(255) NOT NULL,
  is_correct BOOLEAN NOT NULL,
  PRIMARY KEY (id),
  FOREIGN KEY (questionId) REFERENCES QUESTIONS(id)
);
